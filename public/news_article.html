<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Новость - Начальная школа Академия</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="photos/fav.jpeg">
    <link rel="shortcut icon" type="image/jpeg" href="photos/fav.jpeg">
    <link rel="apple-touch-icon" href="photos/fav.jpeg">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header id="main-header" class="scrolled">
        <div class="container header-content">
            <a href="index.html" class="logo">Академия<span>School</span></a>
            <nav class="nav-menu">
                <ul>
                    <li><a href="index.html#about" class="nav-link" data-i18n-key="nav.about">О школе</a></li>
                    <li><a href="index.html#programs" class="nav-link" data-i18n-key="nav.programs">Программы</a></li>
                    <li><a href="index.html#achievements" class="nav-link" data-i18n-key="nav.achievements">Достижения</a></li>
                    <li><a href="index.html#teachers" class="nav-link" data-i18n-key="nav.teachers">Педагоги</a></li>
                    <li><a href="index.html#news" class="nav-link active" data-i18n-key="nav.news">Новости</a></li>
                    <li><a href="index.html#contact" class="nav-link" data-i18n-key="nav.contact">Контакты</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <a href="index.html#contact" class="btn btn-primary" data-i18n-key="nav.apply">Поступить</a>
                <div class="language-switcher">
                    <button class="lang-button">
                        <span class="current-lang">РУС</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <ul class="lang-dropdown">
                        <li><a href="#" class="lang-option" data-lang="ru" data-i18n-key="lang.ru">Русский</a></li>
                        <li><a href="#" class="lang-option" data-lang="kz" data-i18n-key="lang.kz">Қазақша</a></li>
                    </ul>
                </div>
                <div class="mobile-menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- Article Content -->
        <article class="news-article">
            <div class="container">
                <!-- Breadcrumb -->
                <nav class="breadcrumb">
                    <a href="index.html">Главная</a>
                    <i class="fas fa-chevron-right"></i>
                    <a href="index.html#news">Новости</a>
                    <i class="fas fa-chevron-right"></i>
                    <span>Текущая статья</span>
                </nav>

                <!-- Article Header -->
                <header class="article-header">
                    <h1 id="article-title">Загрузка...</h1>
                    <div class="article-meta">
                        <time id="article-date">Загрузка...</time>
                    </div>
                </header>

                <!-- Article Image -->
                <div class="article-image-container" id="article-image-container" style="display: none;">
                    <img id="article-image" src="" alt="" class="article-image">
                </div>

                <!-- Article Content -->
                <div class="article-content">
                    <div id="article-text">
                        <p>Загрузка содержимого...</p>
                    </div>
                </div>

                <!-- Back Button -->
                <div class="article-actions">
                    <a href="index.html#news" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i>
                        Вернуться к новостям
                    </a>
                </div>
            </div>
        </article>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>Начальная школа Академия</h4>
                    <p data-i18n-key="footer.description">Благоприятная и стимулирующая учебная среда для достижения успехов каждого ребёнка.</p>
                    <p class="footer-founded" data-i18n-key="footer.founded">Основана в 2021 году</p>
                </div>
                <div class="footer-col">
                    <h4 data-i18n-key="footer.links.title">Быстрые ссылки</h4>
                    <ul>
                        <li><a href="index.html#about" data-i18n-key="nav.about">О школе</a></li>
                        <li><a href="index.html#programs" data-i18n-key="nav.programs">Программы</a></li>
                        <li><a href="index.html#achievements" data-i18n-key="nav.achievements">Достижения</a></li>
                        <li><a href="index.html#teachers" data-i18n-key="nav.teachers">Педагоги</a></li>
                        <li><a href="index.html#news" data-i18n-key="nav.news">Новости</a></li>
                        <li><a href="index.html#contact" data-i18n-key="nav.contact">Контакты</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4 data-i18n-key="nav.contact">Контакты</h4>
                    <ul>
                        <li data-i18n-key="contact.info.address">г. Астана, район Сарыарка, ул. Шыганак, 7</li>
                        <li>+7 701 573 17 94</li>
                        <li>school@akademia.kz</li>
                        <li data-i18n-key="contact.info.hours">Пн-Пт: 08:00 - 17:00</li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4 data-i18n-key="footer.social.title">Мы в соцсетях</h4>
                    <div class="social-links">
                        <a href="https://instagram.com/akademiakz.school" target="_blank" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-i18n-key="footer.copy">&copy; 2024 ТОО «Начальная школа Академия». Все права защищены.</p>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Загрузка статьи...</p>
        </div>
    </div>

    <!-- Error Message -->
    <div id="error-message" class="error-message" style="display: none;">
        <div class="container">
            <div class="error-content">
                <i class="fas fa-exclamation-triangle"></i>
                <h2>Статья не найдена</h2>
                <p>К сожалению, запрашиваемая статья не найдена или была удалена.</p>
                <a href="index.html#news" class="btn btn-primary">Вернуться к новостям</a>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Ensure header is always in scrolled state on article page
        document.addEventListener('DOMContentLoaded', function() {
            const header = document.getElementById('main-header');
            if (header) {
                header.classList.add('scrolled');
                // Keep it scrolled even if at top of page
                window.addEventListener('scroll', function() {
                    header.classList.add('scrolled');
                });
            }
            
            // Get article ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const articleId = urlParams.get('id');
            
            if (!articleId) {
                showError();
                return;
            }
            
            loadArticle(articleId);
        });
        
        async function loadArticle(id) {
            try {
                const response = await fetch(`/api/news/${id}`);
                if (!response.ok) {
                    throw new Error('Article not found');
                }
                
                const article = await response.json();
                displayArticle(article);
                
            } catch (error) {
                console.error('Error loading article:', error);
                // If API fails, try to load from static articles
                loadStaticArticle(id);
            } finally {
                hideLoading();
            }
        }
        
        function loadStaticArticle(id) {
            // Static articles matching the news carousel
            const staticArticles = {
                '1': {
                    title: "Открытие нового учебного года",
                    content: "Начальная школа Академия с радостью открывает двери для новых и вернувшихся учеников. Мы готовы к новому учебному году с обновленными программами и свежими идеями.\n\nВ этом году мы внедряем новые подходы к обучению математике на английском языке, расширяем программу по робототехнике и вводим дополнительные занятия по развитию логического мышления.\n\nМы верим, что каждый ребенок уникален, и создаем условия для раскрытия потенциала каждого ученика. Наша команда опытных педагогов готова сопровождать детей на пути к знаниям и успеху.",
                    created_at: new Date().toISOString(),
                    image_url: "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?q=80&w=2073&auto=format&fit=crop"
                },
                '2': {
                    title: "Победа в городской олимпиаде",
                    content: "Наш ученик Скорняков Всеволод занял 2 место на городской олимпиаде по математике среди школьников. Это выдающееся достижение стало результатом упорного труда и целеустремленности.\n\nВсеволод готовился к олимпиаде в течение всего учебного года под руководством опытных преподавателей школы. Его успех - это не только личное достижение, но и подтверждение высокого качества образования в нашей школе.\n\nМы гордимся нашими учениками и продолжаем создавать условия для развития их талантов!",
                    created_at: new Date(Date.now() - 86400000).toISOString(),
                    image_url: "https://images.unsplash.com/photo-1567427017947-545c5f8d16ad?q=80&w=2053&auto=format&fit=crop"
                },
                '3': {
                    title: "День открытых дверей",
                    content: "Приглашаем родителей и будущих учеников познакомиться с нашей школой, встретиться с педагогами и узнать о наших образовательных программах.\n\nДень открытых дверей состоится в ближайшую субботу. В программе: экскурсия по школе, презентация образовательных программ, встреча с учителями, мастер-классы для детей.\n\nЗапись по телефону: +7 701 573 17 94. Мы будем рады ответить на все ваши вопросы!",
                    created_at: new Date(Date.now() - 172800000).toISOString(),
                    image_url: "https://images.unsplash.com/photo-1503676260728-1c00da094a0b?q=80&w=2022&auto=format&fit=crop"
                },
                '4': {
                    title: "Занятия по робототехнике",
                    content: "В школе стартовали занятия по робототехнике для учеников всех классов. Дети с энтузиазмом осваивают новые технологии и учатся создавать своих первых роботов.\n\nПрограмма по робототехнике развивает техническое мышление, творческие способности и навыки командной работы. Ученики работают с современным оборудованием и изучают основы программирования.\n\nЗанятия проходят в увлекательной игровой форме, что делает процесс обучения интересным и эффективным.",
                    created_at: new Date(Date.now() - 259200000).toISOString(),
                    image_url: "https://images.unsplash.com/photo-1485827404703-89b55fcc595e?q=80&w=2070&auto=format&fit=crop"
                },
                '5': {
                    title: "Шахматный турнир",
                    content: "Состоялся школьный шахматный турнир, в котором приняли участие ученики всех классов. Победители получили дипломы и призы.\n\nТурнир прошел в дружеской атмосфере. Дети продемонстрировали не только шахматное мастерство, но и спортивный характер, умение достойно принимать как победы, так и поражения.\n\nШахматы развивают логическое мышление, память, внимательность и умение планировать свои действия - навыки, которые пригодятся в учебе и жизни.",
                    created_at: new Date(Date.now() - 345600000).toISOString(),
                    image_url: "https://images.unsplash.com/photo-1529699211952-734e80c4d42b?q=80&w=2071&auto=format&fit=crop"
                },
                '6': {
                    title: "Концерт ко Дню учителя",
                    content: "Ученики подготовили праздничный концерт для наших любимых учителей. Спасибо за ваш труд и преданность!\n\nКонцертная программа включала песни, танцы, стихи и театральные постановки. Дети с большой любовью и старанием готовились к выступлениям, чтобы порадовать своих наставников.\n\nТакие мероприятия укрепляют связь между учениками и учителями, создают атмосферу взаимного уважения и благодарности.",
                    created_at: new Date(Date.now() - 432000000).toISOString(),
                    image_url: "https://images.unsplash.com/photo-1511578314322-379afb476865?q=80&w=2069&auto=format&fit=crop"
                }
            };
            
            const article = staticArticles[id];
            if (article) {
                displayArticle(article);
            } else {
                showError();
            }
        }
        
        function displayArticle(article) {
            // Update page title
            document.getElementById('page-title').textContent = article.title + ' - Начальная школа Академия';
            document.getElementById('article-title').textContent = article.title;
            
            // Format date
            const date = new Date(article.created_at).toLocaleDateString('ru-RU', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('article-date').textContent = date;
            
            // Display image if available
            if (article.image_url) {
                const imageContainer = document.getElementById('article-image-container');
                const image = document.getElementById('article-image');
                image.src = article.image_url;
                image.alt = article.title;
                imageContainer.style.display = 'block';
            }
            
            // Display content (replace line breaks with paragraphs)
            const content = article.content.split('\n').map(paragraph => {
                return paragraph.trim() ? `<p>${paragraph.trim()}</p>` : '';
            }).join('');
            
            document.getElementById('article-text').innerHTML = content;
        }
        
        function showError() {
            document.getElementById('error-message').style.display = 'block';
            document.querySelector('.news-article').style.display = 'none';
        }
        
        function hideLoading() {
            document.getElementById('loading-overlay').style.display = 'none';
        }
    </script>
</body>
</html>